# EmoArc Web - Django Emotion Analysis Platform

A modern, professional web application for exploring emotional trajectories in literature. Built with Django and featuring interactive visualizations, book comparisons, and intelligent recommendations.

## Features

### ğŸ¨ Modern, Responsive UI
- Built with Tailwind CSS for a clean, professional design
- Fully responsive layout that works on all devices
- Interactive Plotly visualizations
- Smooth animations and transitions

### ğŸ“š Book Analysis
- **Emotion Profiles**: Radar charts showing 8 Plutchik emotions
- **Emotional Journey**: Track emotion changes throughout the narrative
- **VAD Analysis**: Valence, Arousal, and Dominance scores
- **Narrative Structure**: Rising action, climax position, and resolution metrics
- **Complex Emotions**: 18 Plutchik dyads (love, guilt, pride, etc.)
- **Topic Modeling**: LDA-based thematic content analysis

### ğŸ” Search & Discovery
- **Advanced Search**: Filter by title, author, or book ID
- **Genre Filtering**: Explore books by genre
- **Emotion-based Sorting**: Find the most joyful, sad, fearful books, etc.
- **Pagination**: Efficient browsing of large libraries

### ğŸ“Š Comparison & Recommendations
- **Side-by-Side Comparison**: Compare up to 5 books simultaneously
- **Emotional Distance**: Calculate similarity between books
- **Smart Recommendations**: Get suggestions based on emotional profiles
- **Genre Explorer**: Aggregate statistics by genre

## Installation

### Prerequisites
- Python 3.8+
- Django 5.0+
- Plotly
- Pandas

### Setup

1. **Install dependencies**:
```bash
pip install -r requirements.txt
```

2. **Navigate to web directory**:
```bash
cd web
```

3. **Run migrations** (already done, but if needed):
```bash
python manage.py migrate
```

4. **Create superuser** (optional, for admin access):
```bash
python manage.py createsuperuser
```

5. **Load book data**:
```bash
# Load from trajectory CSV generated by main.py
python manage.py load_books ../output/trajectories
```

6. **Run development server**:
```bash
python manage.py runserver
```

7. **Access the app**:
Open your browser to `http://127.0.0.1:8000`

## Usage

### Loading Data

The app requires trajectory data from the main pipeline. First, run the analysis pipeline:

```bash
# From the project root
python main.py --limit 100
```

This generates CSV files in `output/trajectories/`. Then load them into Django:

```bash
cd web
python manage.py load_books ../output/trajectories
```

### Features Overview

#### Home Page (`/`)
- Browse all analyzed books
- Search by title/author
- Filter by genre
- Sort by emotions
- View quick stats for each book

#### Book Detail (`/book/<book_id>/`)
- Comprehensive emotion analysis
- Interactive radar chart
- Emotional journey timeline
- VAD dimensional analysis
- Narrative arc metrics
- Topic modeling results
- Similar book recommendations

#### Compare Books (`/compare/`)
- Select multiple books to compare
- Overlapping radar charts
- Side-by-side statistics
- Identify emotional patterns

#### Genre Explorer (`/genres/`)
- View all genres with aggregate statistics
- Compare average emotions by genre
- Browse books within each genre

#### Recommendations (`/recommendations/<book_id>/`)
- Get 10 most similar books
- Based on emotional distance calculation
- Similarity scores displayed

### Admin Interface

Access Django admin at `http://127.0.0.1:8000/admin/` to:
- View and edit books
- Manage uploaded books
- Filter by genre
- Search books

## Data Model

### Book
Stores comprehensive emotional analysis data:
- **Metadata**: title, author, book_id
- **8 Basic Emotions**: anger, anticipation, disgust, fear, joy, sadness, surprise, trust
- **VAD Scores**: valence, arousal, dominance
- **18 Dyads**: love, submission, alarm, disappointment, remorse, contempt, etc.
- **Narrative Metrics**: rising action, climax position, resolution, volatility
- **Genre Classification**: primary genre and scores
- **Topic Modeling**: dominant themes and summaries
- **Emotion Trajectory**: chunk-by-chunk emotion data (JSON)

### UploadedBook
For future feature: user-uploaded books for on-demand analysis

## Technology Stack

- **Backend**: Django 5.0
- **Frontend**: Tailwind CSS (via CDN)
- **Visualizations**: Plotly.js
- **Database**: SQLite (default, can use PostgreSQL/MySQL)
- **Data Processing**: Pandas

## Advantages Over Streamlit

1. **Better Performance**: Django handles large datasets more efficiently
2. **Professional UI**: Tailwind CSS provides a polished, modern design
3. **Scalability**: Easily deploy to production with Django
4. **Database-backed**: Persistent storage, no reloading CSV files
5. **Advanced Features**: User authentication, admin panel, file uploads (future)
6. **SEO-friendly**: Proper URLs and server-side rendering
7. **Customization**: Full control over UI/UX
8. **Multi-user**: Can handle concurrent users better

## Future Enhancements

- [ ] User authentication and personal libraries
- [ ] Upload custom books for real-time analysis
- [ ] Export analysis reports as PDF
- [ ] Social features (ratings, reviews)
- [ ] Advanced filtering (date ranges, emotional thresholds)
- [ ] Batch comparison tools
- [ ] API endpoints for programmatic access
- [ ] Interactive emotion trajectory editing
- [ ] Book clustering visualization
- [ ] Genre prediction for new books

## Project Structure

```
web/
â”œâ”€â”€ emoarc/              # Django project settings
â”‚   â”œâ”€â”€ settings.py
â”‚   â”œâ”€â”€ urls.py
â”‚   â””â”€â”€ wsgi.py
â”œâ”€â”€ books/               # Main app
â”‚   â”œâ”€â”€ models.py        # Book and UploadedBook models
â”‚   â”œâ”€â”€ views.py         # All view functions and chart generation
â”‚   â”œâ”€â”€ urls.py          # URL routing
â”‚   â”œâ”€â”€ admin.py         # Admin interface configuration
â”‚   â”œâ”€â”€ templates/       # HTML templates
â”‚   â”‚   â””â”€â”€ books/
â”‚   â”‚       â”œâ”€â”€ base.html
â”‚   â”‚       â”œâ”€â”€ home.html
â”‚   â”‚       â”œâ”€â”€ book_detail.html
â”‚   â”‚       â”œâ”€â”€ compare.html
â”‚   â”‚       â”œâ”€â”€ compare_select.html
â”‚   â”‚       â”œâ”€â”€ genre_explorer.html
â”‚   â”‚       â””â”€â”€ recommendations.html
â”‚   â””â”€â”€ management/
â”‚       â””â”€â”€ commands/
â”‚           â””â”€â”€ load_books.py  # CSV import command
â”œâ”€â”€ static/              # Static files (CSS, JS, images)
â”œâ”€â”€ media/               # User uploads
â”œâ”€â”€ manage.py            # Django management script
â””â”€â”€ db.sqlite3          # SQLite database
```

## Development

### Running Tests
```bash
python manage.py test books
```

### Creating Migrations
```bash
python manage.py makemigrations books
```

### Collecting Static Files (for production)
```bash
python manage.py collectstatic
```

## Deployment

For production deployment:

1. Set `DEBUG = False` in settings.py
2. Configure `ALLOWED_HOSTS`
3. Use PostgreSQL or MySQL instead of SQLite
4. Set up proper static file serving
5. Use gunicorn or uwsgi
6. Configure nginx as reverse proxy
7. Enable HTTPS

## Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Test thoroughly
5. Submit a pull request

## License

MIT License - see LICENSE file for details

## Support

For issues or questions, please open an issue on GitHub.

---

**EmoArc Web** - Exploring Literature Through Emotional Intelligence
